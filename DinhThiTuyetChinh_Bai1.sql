CREATE DATABASE QUANLY_SINHVIEN

USE QUANLY_SINHVIEN
GO

CREATE TABLE KHOA
(
MAKHOA CHAR(10) NOT NULL,
TENKHOA NVARCHAR(50),
CONSTRAINT PK_KHOA PRIMARY KEY (MAKHOA)
)

CREATE TABLE LOP
(
MALOP CHAR(10) NOT NULL,
TENLOP NVARCHAR(50),
SISODK INT,
MAKHOA CHAR(10),
CONSTRAINT PK_LOP PRIMARY KEY (MALOP),
CONSTRAINT FK_LOP_KHOA FOREIGN KEY (MAKHOA) REFERENCES KHOA(MAKHOA)
)

CREATE TABLE SINHVIEN
(
MASV CHAR(10) NOT NULL,
HOTEN NVARCHAR(100),
NGSINH DATE,
DCHI NVARCHAR(100),
GIOITINH NVARCHAR(10),
MALOP CHAR(10),
CONSTRAINT PK_SV PRIMARY KEY (MASV),
CONSTRAINT FK_SV_LOP FOREIGN KEY (MALOP) REFERENCES LOP(MALOP)
)

CREATE TABLE MONHOC
(
MAMH CHAR(10) NOT NULL,
TENMH NVARCHAR(50),
SOTIET INT,
CONSTRAINT PK_MH PRIMARY KEY (MAMH)
)

CREATE TABLE KETQUA
(
MASV CHAR(10) NOT NULL,
MAMH CHAR(10) NOT NULL,
DIEM FLOAT,
CONSTRAINT PK_KETQUA PRIMARY KEY (MASV, MAMH),
CONSTRAINT FK_KETQUA_SV FOREIGN KEY (MASV) REFERENCES SINHVIEN(MASV),
CONSTRAINT FK_KETQUA_MH FOREIGN KEY (MAMH) REFERENCES MONHOC(MAMH)
)

INSERT INTO KHOA
VALUES
('TH', 'TINHOC'),
('VL', 'VATLY'),
('DT', 'DIEN TU'),
('TP', 'THUC PHAM'),
('HH', 'HOA HOC'),
('SH', 'SINH HOC')

INSERT INTO LOP
VALUES
('L001', '24THTH1', 30, 'TH'),
('L002', '24THTH2', 30, 'TH'),
('L003', '05CDTH', 60, 'TH'),
('L004', '06CDTH1', 60, 'TH'),
('L005', '06CDTH2', 60, 'TH'),
('L006', '24THTP1', 30, 'TP'),
('L007', '24THTP2', 30, 'TP'),
('L008', '24THTP3', 30, 'TP'),
('L009', '06CDDT', 60, 'DT'),
('L010', '05CDVL', 45, 'VL'),
('L011', '24THHH', 60, 'HH'),
('L012', '06CDSH', 60, 'SH')

SET DATEFORMAT DMY
INSERT INTO SINHVIEN
VALUES
('SV01', 'Nguyen Thi Lan', '12/03/1978', 'TPHCM', 'Nam', 'L001'),
('SV02', 'Tran Thanh Tung', '02/04/1980', 'VUNG TAU', 'Nam', 'L001'),
('SV03', 'Truong Thi Hue', '11/10/1984', 'DA NANG', 'Nu', 'L001'),
('SV04', 'Le Van Khanh', '04/07/1985', 'VUNG TAU', 'Nam', 'L002'),
('SV05', 'Ngo Viet Nam', '14/08/1986', 'DA NANG', 'Nam', 'L002'),
('SV06', 'Tran Thi Lieu', '14/08/1986', 'TPHCM', 'Nu', 'L003'),
('SV07', 'Tran Thanh Nam', '15/07/1985', 'DONG NAI', 'Nam', 'L004'),
('SV08', 'Pham Hoai Phong', '02/04/1988', 'TIEN GIANG', 'Nam', 'L004'),
('SV09', 'Tran Thi To Anh', '19/05/1979', 'TPHCM', 'Nu', 'L004'),
('SV10', 'Do Thi Hanh', '08/07/1981', 'DONG NAI', 'Nu', 'L004'),
('SV11', 'Ha Thanh Tung', '26/04/1983', 'VUNG TAU', 'Nam', 'L005'),
('SV12', 'Tran Quoc Tuan', '15/07/1982', 'TIEN GIANG', 'Nam', 'L006'),
('SV13', 'Nguyen Minh Tri', '10/10/1981', 'DONG THAP', 'Nam', 'L007'),
('SV14', 'Tran Thanh Phuoc', '17/12/1984', 'TPHCM', 'Nam', 'L008'),
('SV15', 'Nguyen Phuoc Sang', '18/02/1986', 'HA NOI', 'Nam', 'L008'),
('SV16', 'Le Thi Anh', '15/05/1987', 'HA NOI', 'Nu', 'L009'),
('SV17', 'Truong Thi Nhan', '12/03/1981', 'TPHCM', 'Nu', 'L010'),
('SV18', 'Nguyen Kim Phung', '14/06/1983', 'HA NOI', 'Nu', 'L011'),
('SV19', 'Tran Thi Tham', '11/02/1985', 'DONG NAI', 'Nu', 'L012'),
('SV20', 'N Thi Thu Trang', '17/05/1988', 'TPHCM', 'Nu', 'L005');

INSERT INTO MONHOC
VALUES
('M001','TOAN CAO CAP A1', 60),
('M002','LICH SU DANG', 45),
('M003','CHINH TRI', 45),
('M004','CO SO DU LIEU', 90),
('M005','SQL SERVER', 60),
('M006','LAP TRINH C', 60),
('M007','XU LY ANH', 90),
('M008','TIN HOC CAN BAN', 60),
('M009','MANG MAY TINH', 60),
('M010','TOAN ROI RAC', 45),
('M011','LAP TRINH QLY', 90),
('M012','VISUAL BASIC', 90);

INSERT INTO KETQUA
VALUES
('SV01', 'M001', 8),
('SV01', 'M002', 4),
('SV01', 'M003', 6),
('SV02', 'M001', 7),
('SV04', 'M001', 5),
('SV04', 'M002', 7),
('SV05', 'M003', 9),
('SV06', 'M008', 10),
('SV07', 'M005', 6),
('SV07', 'M007', 9),
('SV08', 'M004', 7),
('SV09', 'M010', 3),
('SV10', 'M001', 8),
('SV10', 'M006', 6),
('SV11', 'M004', 5),
('SV12', 'M004', 8),
('SV13', 'M007', 8),
('SV14', 'M005', 4),
('SV14', 'M006', 7),
('SV15', 'M009', 7),
('SV16', 'M002', 10),
('SV17', 'M006', 8),
('SV18', 'M007', 9),
('SV19', 'M006', 7),
('SV20', 'M001', 5),
('SV20', 'M002', 7),
('SV20', 'M004', 6),
('SV20', 'M005', 9),
('SV20', 'M009', 10);